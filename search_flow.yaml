jtype: Flow
version: "1"
with:
  port: 61000
executors:
  - name: encoder
    uses:
      jtype: CLIPEncoder
      with:
        model_name: ViT-B/32
        device: cpu
      metas:
        py_modules:
          - clip_server.executors.clip_torch

  - name: indexer
    uses:
      jtype: AnnLiteIndexer
      with:
        n_dim: 512
        limit: 10
        sync_bulk: True # 强制同步写入（关键修复）
      metas:
        py_modules:
          - annlite.executor
    workspace: "./workspace"
